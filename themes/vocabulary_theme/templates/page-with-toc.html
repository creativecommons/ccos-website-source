{% extends "layout.html" %}

{% block title %}{{ this.title }}{% endblock %}

{% block body %}
 <header>
  <h1>{{ this.title }}</h1>
  <p> {{ this.description }} </p>
</header>

<aside class="sidebar">
    {% if this.is_child_of('/contributing-code') %}
        <nav class="filter-menu" aria-labelledby="contributing-code">
            <h2>Contributing Code</h2>
            <ul>
                {% for href, title in [
                    ['/contributing-code/projects', 'Project List'],
                    ['/contributing-code/issue-finder', 'Issue Finder'],
                    ['/contributing-code', 'Contribution Guidelines'],
                    ['/contributing-code/usability', 'Usability'],
                ] %}
                    <li>
                        <a href="{{ href|url }}">{{ title }}</a>
                        {% if href == '/contributing-code' %}
                            <ul>
                                {% for href, title in [
                                    ['/contributing-code/foundational-tech', 'Foundational technologies'],
                                    ['/contributing-code/pr-guidelines', 'Pull Request Guidelines'],
                                    ['/contributing-code/github-repo-guidelines', 'GitHub Repo Guidelines'],
                                    ['/contributing-code/repo-labels', 'Repository Labels'],
                                    ['/contributing-code/documentation-guidelines', 'Documentation Guidelines'],
                                    ['/contributing-code/javascript-guidelines', 'JavaScript Guidelines'],
                                    ['/contributing-code/python-guidelines', 'Python Guidelines'],
                                    ['/contributing-code/translation-guide', 'Translation Guide'],
                                ] %}
                                    <li>
                                        <a href="{{ href|url }}">
                                        {{ title }}
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </nav>
    {% elif this.is_child_of('/community') %}
        <nav class="filter-menu" aria-labelledby="community">
            <h2>Community</h2>
            <ul>
                {% for href, title in [
                    ['/community', 'Join the Community'],
                    ['/community/community-team', 'Community Team'],
                    ['/community/write-a-blog-post', 'Write a Blog Post'],
                    ['/community/code-of-conduct', 'Code of Conduct'],
                    ['/community/supporters', 'Supporters'],
                ] %}
                    <li>
                        <a href="{{ href|url }}">{{ title }}</a>
                        {% if href == '/community/community-team' %}
                            <ul>
                                {% for href, title in [
                                    ['/community/community-team/members', 'Community Team Members'],
                                    ['/community/community-team/project-roles', 'Project Roles'],
                                    ['/community/community-team/community-building-roles', 'Community Building Roles'],
                                    ['/community/community-team/engagement-channels', 'Engagement Channels'],
                                ] %}
                                    <li>
                                        <a  href="{{ href|url }}">
                                        {{ title }}
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% elif href == '/community/code-of-conduct' %}
                            <ul>
                                <li>
                                    <a href="{{ '/community/code-of-conduct/enforcement'|url }}">
                                      Code of Conduct Enforcement
                                    </a>
                                </li>
                            </ul>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </nav>
    {% elif this.is_child_of('/programs') %}
        <nav class="filter-menu" aria-labelledby="programs">
            <h2>Programs</h2>
            <ul>
                {% for href, title in [
                    ['/programs', 'Overview'],
                    ['/programs/project-ideas', 'Project Ideas'],
                    ['/programs/history', 'History'],
                ] %}
                    <li>
                        <a href="{{ href|url }}">{{ title }}</a>
                        {% if href == '/programs' %}
                            <ul>
                                {% for href, title in [
                                    ['/programs/applicant-guide', 'Applicant Guide'],
                                    ['/programs/contrib-guide', 'Contributor Guide'],
                                    ['/programs/lead-guide', 'Project Lead Guide'],
                                ] %}
                                    <li>
                                        <a href="{{ href|url }}">
                                          {{ title }}
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </nav>
    {% endif %}
    <nav class="filter-menu" aria-labelledby="on-this-page">
        <h2>On this page</h2>
        <ul>
            {% for item in this.body.toc %}
                <li>
                    <a href="#{{ item.anchor }}">{{ item.title }}</a>
                    {% if item.children and not this.is_long_page %}
                        <ul>
                            {% for subitem in item.children %}
                                <li>
                                    <a href="#{{ subitem.anchor }}">
                                      {{ subitem.title }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </nav>
</aside>

<div class="content">
    {{ this.body }}
</div>

{% endblock %}
