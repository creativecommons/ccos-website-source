{% extends "layout.html" %}

{% from "macros/author_name.html" import render_author_name %}

{% from "macros/posts.html" import render_posts %}

{% set author = this.parent.parent.children.get('authors').children.get(this.author) %}

{% block title %}{{ this.title }}{% endblock %}
{% block header %}{{ this.parent.title }}{% endblock %}
{% block body %}
  <h2 class="mb-0">{{ this.title }}</h2>
  {{ check_file('content' + this.parent.parent.path + '/authors/' + this.author + '/contents.lr') }}
<<<<<<< HEAD
  <p class="meta text-muted mt-0 mb-2">by <a href="{{ author|url }}">{{ render_author_name(author) }}</a>
  on {{ this.pub_date|dateformat('EEEE, yyyy-''MM-d') }}</p>
  {% if this.series|length %}  
   {% set series = this.parent.parent.children.get('series').children.get(this.series) %}
  <div class="card bg-light mb-2">
    <div class="card-body p-2">
    <p class="meta my-0"><span class="mr-2"><strong>This blog is part of the series:</strong></span>
       <a href="#series">{{ this.series }}</a>
    </p>
    </div>
  </div>
 {% endif %}
=======
  <p class="meta text-muted mt-0">by <a href="{{ author|url }}">{{ render_author_name(author) }}</a>
  on {{ this.pub_date|dateformat('EEEE, yyyy-''MM-d') }}</p>
>>>>>>> e0cd24a51d73671e91264bd100b5c357357f4c5b
  <div class="body">{{ this.body }}</div>
  <div class="card bg-light">
    <div class="card-body p-2">
      <p class="meta my-0"><span class="mr-2"><strong>Categories:</strong></span>
        {% if this.categories|length %}
          {% for category in this.categories %}
            {% set current_category = this.parent.parent.children.get('categories').children.get(category) %}
            {{ check_file('content' + this.parent.parent.path + '/categories/' + category + '/contents.lr') }}
            <a href=" {{ current_category|url }} ">{{ category }}</a>{{ "," if not loop.last }}
          {% endfor %}
        {% else %}
          none
        {% endif %}
      </p>
    </div>
  </div>
{% if this.series|length %}
<table class="table table-striped table-sm mt-3" id="series">
<thead>
<tr>
<th>
All posts in this series "<span style="font-size:1.15rem">{{ this.series }}<span>"
</th>
</tr>
</thead>
<tbody>
{% for post in series.children %}
      <tr>
        <td>
         {% if post.path==this.path %}
           {{ post.title }}
         {% else %}
           <a href="{{ post|url }}">{{ post.title }}</a>
        {% endif %}
        </td>
     </tr>
    {% endfor %}
</tbody>
</table>
  <hr>
  Check out  <strong><a href="/blog/series/">All Series</a></strong>
{% endif %}
  <div class="comments">{{ render_disqus_comments() }}</div>
{% endblock %}
